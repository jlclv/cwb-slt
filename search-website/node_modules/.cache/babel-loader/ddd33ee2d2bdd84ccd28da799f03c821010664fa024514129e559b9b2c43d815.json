{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\julia\\\\Desktop\\\\cwb-slt\\\\search-website\\\\src\\\\pages\\\\VectorSearch.js\",\n  _s = $RefreshSig$();\nimport SearchBar from \"../components/SearchBar\";\nimport StartupsListVector from \"../components/StartupsListVector\";\nimport AlertInstruction from \"../components/AlertInstructions\";\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction VectorSearch() {\n  _s();\n  const [query, setQuery] = useState(\"Singapore\");\n  const [vectorquery, setVectorquery] = useState([]);\n  const [startups, setStartups] = useState([]);\n  const {\n    SearchClient,\n    AzureKeyCredential\n  } = require(\"@azure/search-documents\");\n  const {\n    OpenAI\n  } = require('openai');\n  const endpoint = process.env.REACT_APP_search_endpoint;\n  const indexName = process.env.REACT_APP_index_name;\n  const searchKey = process.env.REACT_APP_search_api_key;\n  const openapiKey = process.env.REACT_APP_openapi_key;\n  const client = new SearchClient(endpoint, indexName, new AzureKeyCredential(searchKey));\n  const openai = new OpenAI({\n    apiKey: openapiKey,\n    dangerouslyAllowBrowser: true\n  });\n  async function getEmbeddings() {\n    const embedding = await openai.embeddings.create({\n      model: \"text-embedding-ada-002\",\n      input: query\n    });\n    setVectorquery(embedding.data[0].embedding);\n  }\n  useEffect(() => {\n    getEmbeddings();\n  }, []);\n  const getStartupsVector = async () => {\n    let startupList = [];\n    const searchResults = await client.search(\"*\", {\n      vectorSearchOptions: {\n        queries: [{\n          kind: \"vector\",\n          fields: [\"DescriptionVector\"],\n          kNearestNeighborsCount: 5,\n          vector: vectorquery\n        }]\n      }\n    });\n    for await (const result of searchResults.results) {\n      let newStartup = {\n        ...result.document\n      };\n      newStartup.score = result.score;\n      startupList.push(newStartup);\n    }\n    console.log(startupList);\n    setStartups(startupList);\n  };\n  function handleChange(event) {\n    setQuery(event.target.value);\n  }\n  function handleSearch(event) {\n    event.preventDefault();\n    getEmbeddings();\n    getStartupsVector();\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      query: query,\n      onChange: handleChange,\n      onSubmit: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(AlertInstruction, {\n      text: \"Only the top 5 results will be shown\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StartupsListVector, {\n      startups: startups\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(VectorSearch, \"gmWwRDyEj3t7D9qVMDC5EE7xt7c=\");\n_c = VectorSearch;\nexport default VectorSearch;\nvar _c;\n$RefreshReg$(_c, \"VectorSearch\");","map":{"version":3,"names":["SearchBar","StartupsListVector","AlertInstruction","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","VectorSearch","_s","query","setQuery","vectorquery","setVectorquery","startups","setStartups","SearchClient","AzureKeyCredential","require","OpenAI","endpoint","process","env","REACT_APP_search_endpoint","indexName","REACT_APP_index_name","searchKey","REACT_APP_search_api_key","openapiKey","REACT_APP_openapi_key","client","openai","apiKey","dangerouslyAllowBrowser","getEmbeddings","embedding","embeddings","create","model","input","data","getStartupsVector","startupList","searchResults","search","vectorSearchOptions","queries","kind","fields","kNearestNeighborsCount","vector","result","results","newStartup","document","score","push","console","log","handleChange","event","target","value","handleSearch","preventDefault","children","onChange","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","text","_c","$RefreshReg$"],"sources":["C:/Users/julia/Desktop/cwb-slt/search-website/src/pages/VectorSearch.js"],"sourcesContent":["import SearchBar from \"../components/SearchBar\";\r\nimport StartupsListVector from \"../components/StartupsListVector\";\r\nimport AlertInstruction from \"../components/AlertInstructions\";\r\nimport { useState,useEffect } from \"react\";\r\n\r\nfunction VectorSearch() {\r\n    const [query, setQuery] = useState(\"Singapore\");\r\n    const [vectorquery, setVectorquery] = useState([]);\r\n    const [startups, setStartups] = useState([]);\r\n    \r\n    const { SearchClient, AzureKeyCredential } = require(\"@azure/search-documents\");\r\n    const {OpenAI} = require('openai');\r\n\r\n    const endpoint = process.env.REACT_APP_search_endpoint;\r\n    const indexName = process.env.REACT_APP_index_name;\r\n    const searchKey = process.env.REACT_APP_search_api_key;\r\n    const openapiKey = process.env.REACT_APP_openapi_key;\r\n\r\n    const client = new SearchClient(endpoint, indexName, new AzureKeyCredential(searchKey));\r\n    const openai = new OpenAI({apiKey: openapiKey, dangerouslyAllowBrowser: true});\r\n\r\n    async function getEmbeddings() {\r\n        const embedding = await openai.embeddings.create({\r\n          model: \"text-embedding-ada-002\",\r\n          input: query,\r\n        });\r\n        setVectorquery(embedding.data[0].embedding)\r\n      }\r\n\r\n      useEffect(() => {\r\n        getEmbeddings();\r\n    }, []);\r\n\r\n\r\n    const getStartupsVector = async() => {\r\n        let startupList = [];\r\n        const searchResults = await client.search(\"*\",{\r\n            vectorSearchOptions: {\r\n              queries: [\r\n                {\r\n                  kind: \"vector\",\r\n                  fields: [\"DescriptionVector\"],\r\n                  kNearestNeighborsCount: 5,\r\n                  vector: vectorquery,\r\n                }\r\n              ],\r\n            },\r\n          });\r\n      \r\n          for await (const result of searchResults.results) {\r\n            let newStartup = {...result.document}\r\n            newStartup.score = result.score\r\n            startupList.push(newStartup)\r\n          }\r\n          console.log(startupList)\r\n          setStartups(startupList)\r\n    }\r\n    \r\n    function handleChange(event) {\r\n        setQuery(event.target.value);\r\n    }\r\n\r\n    function handleSearch(event) {\r\n        event.preventDefault();\r\n        getEmbeddings();\r\n        getStartupsVector();\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <SearchBar query={query} onChange={handleChange} onSubmit={handleSearch} />\r\n            <AlertInstruction text=\"Only the top 5 results will be shown\"/>\r\n            <StartupsListVector startups={startups}/>\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default VectorSearch;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}